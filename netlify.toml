# ==============================================================================
# Configuration Netlify pour Next.js - Gestion Locative
# https://docs.netlify.com/integrations/frameworks/next-js/overview/
# ==============================================================================

[build]
  command = "npm run build"
  # Ne pas sp√©cifier publish - le plugin Next.js le g√®re automatiquement

# Plugin Next.js pour Netlify (requis)
[[plugins]]
  package = "@netlify/plugin-nextjs"

# Variables d'environnement de build
[build.environment]
  NODE_VERSION = "22"
  NPM_VERSION = "10"
  NETLIFY = "true"  # D√©sactive PWA sur Netlify

# ==============================================================================
# VARIABLES D'ENVIRONNEMENT √Ä CONFIGURER DANS L'UI NETLIFY
# Site settings > Environment variables
# ==============================================================================
#
# üî¥ REQUISES:
#   - NEXT_PUBLIC_SUPABASE_URL
#   - NEXT_PUBLIC_SUPABASE_ANON_KEY
#   - SUPABASE_SERVICE_ROLE_KEY (üîí secret)
#   - API_KEY_MASTER_KEY (üîí secret)
#   - NEXT_PUBLIC_APP_URL (ex: https://votre-site.netlify.app)
#
# üü° OPTIONNELLES (selon fonctionnalit√©s activ√©es):
#   - OPENAI_API_KEY (üîí secret) - pour les fonctionnalit√©s IA
#   - STRIPE_SECRET_KEY (üîí secret) - pour les paiements
#   - NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY - pour les paiements
#   - RESEND_API_KEY (üîí secret) - pour les emails
#   - TWILIO_ACCOUNT_SID, TWILIO_AUTH_TOKEN (üîí secrets) - pour les SMS
#   - NEXT_PUBLIC_SENTRY_DSN - pour le monitoring
#   - NEXT_PUBLIC_POSTHOG_KEY - pour les analytics
#
# ‚ö†Ô∏è  IMPORTANT: Les variables marqu√©es üîí sont secr√®tes et ne doivent
#     JAMAIS commencer par NEXT_PUBLIC_ pour √©viter l'exposition au client.
# ==============================================================================

# ==============================================================================
# HEADERS & REDIRECTS
# Tous les headers sont d√©finis dans next.config.js > headers()
# pour √©viter les conflits avec @netlify/plugin-nextjs qui g√©n√®re
# automatiquement le fichier _headers √† partir de la config Next.js.
# Ne PAS dupliquer les headers ici, sinon le plugin peut produire
# un fichier _headers invalide et le deploy √©choue.
# ==============================================================================

